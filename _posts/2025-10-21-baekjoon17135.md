---
title: "[ë°±ì¤€ 17135] ìºìŠ¬ ë””íœìŠ¤ (Castle Defense) - Java"
date: 2025-10-21
categories: [Baekjoon, Java]
tags: [ì‹œë®¬ë ˆì´ì…˜, BFS, ì¡°í•©, êµ¬í˜„, Java, ë°±ì¤€]
layout: single
author_profile: true
read_time: true
share: true
show_tags: true
show_categories: true
toc: true
sidebar:
  nav: "c"
---

# ğŸ° ë°±ì¤€ 17135 - ìºìŠ¬ ë””íœìŠ¤ (Castle Defense)

## ğŸ“˜ ë¬¸ì œ ê°œìš”

NÃ—M í¬ê¸°ì˜ ê²©ìì—ì„œ ì„±ì„ ì§€í‚¤ëŠ” 3ëª…ì˜ ê¶ìˆ˜ê°€ ìˆìŠµë‹ˆë‹¤.  
ê° í„´ë§ˆë‹¤ ê¶ìˆ˜ëŠ” ê±°ë¦¬ê°€ D ì´í•˜ì¸ ì  ì¤‘ ê°€ì¥ ê°€ê¹Œìš´ ì ì„ ê³µê²©í•˜ê³ , ê±°ë¦¬ê°€ ê°™ë‹¤ë©´ **ê°€ì¥ ì™¼ìª½ì— ìˆëŠ” ì **ì„ ìš°ì„ ì ìœ¼ë¡œ ê³µê²©í•©ë‹ˆë‹¤.  
ëª¨ë“  ê¶ìˆ˜ê°€ ë™ì‹œì— ê³µê²©í•œ í›„, ê³µê²©ë°›ì€ ì ì€ ì œê±°ë˜ë©° ì ë“¤ì€ í•œ ì¹¸ ì•„ë˜ë¡œ ì´ë™í•©ë‹ˆë‹¤.  
ëª¨ë“  ì ì´ ì„±ìœ¼ë¡œ ë“¤ì–´ì˜¤ë©´ ê²Œì„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.

ëª©í‘œëŠ” **ê¶ìˆ˜ 3ëª…ì„ ì–´ë””ì— ë°°ì¹˜í• ì§€ ì •í•´ì„œ ìµœëŒ€í•œ ë§ì€ ì ì„ ì²˜ì¹˜í•˜ëŠ” ê²ƒ**ì…ë‹ˆë‹¤.

---

## ğŸ’¡ ì ‘ê·¼ ë°©ë²•

ì´ ë¬¸ì œëŠ” **ì¡°í•©(Combination)** + **ì‹œë®¬ë ˆì´ì…˜(Simulation)** + **BFS íƒìƒ‰**ì˜ ëŒ€í‘œì ì¸ ë¬¸ì œì…ë‹ˆë‹¤.

1. **ì¡°í•© (Combination)**

   - Mê°œì˜ ì—´ ì¤‘ 3ê°œë¥¼ ì„ íƒí•´ ê¶ìˆ˜ì˜ ìœ„ì¹˜ë¥¼ ì¡°í•©ìœ¼ë¡œ êµ¬í•©ë‹ˆë‹¤.
   - `conbination(int start, int depth)` ì¬ê·€í•¨ìˆ˜ë¥¼ ì´ìš©í•©ë‹ˆë‹¤.

2. **ì‹œë®¬ë ˆì´ì…˜ (Simulation)**

   - ê° ì¡°í•©ë§ˆë‹¤ ì‹¤ì œ ê²Œì„ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ ì²˜ì¹˜ ìˆ˜ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
   - ë§¤ í„´ë§ˆë‹¤ ê¶ìˆ˜ê°€ ê³µê²©í•  ì ì„ ì°¾ê³ , ì´í›„ ì ì´ í•œ ì¹¸ì”© ì•„ë˜ë¡œ ë‚´ë ¤ì˜µë‹ˆë‹¤.

3. **BFS íƒìƒ‰ (Breadth First Search)**
   - ê° ê¶ìˆ˜ë§ˆë‹¤ ê³µê²©í•  ì ì„ ì°¾ì„ ë•Œ **ê°€ê¹Œìš´ ê±°ë¦¬ + ì™¼ìª½ ìš°ì„ ìˆœìœ„** ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ê¸° ìœ„í•´ BFSë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

---

## ğŸ“‚ ì „ì²´ ì½”ë“œ

```java
package Baekjoon;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.*;

public class baekjoon17135 {
    static int N, M, D;                   // ë§µ í¬ê¸° Ní–‰ Mì—´, ê³µê²© ê±°ë¦¬ D
    static int[][] originalMap;           // ì´ˆê¸° ë§µ ì •ë³´ ì €ì¥ìš©
    static int maxKill = 0;               // ìµœëŒ€ ì²˜ì¹˜í•œ ì  ìˆ˜
    static int[] archerPos = new int[3];  // 3ëª…ì˜ ê¶ìˆ˜ ìœ„ì¹˜(ì—´ ë²ˆí˜¸)

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st;

        // ì…ë ¥: N, M, D ê°’ ì½ê¸°
        st = new StringTokenizer(br.readLine());
        N = Integer.parseInt(st.nextToken());
        M = Integer.parseInt(st.nextToken());
        D = Integer.parseInt(st.nextToken());

        originalMap = new int[N][M];

        // ë§µ ì •ë³´ ì…ë ¥ ë°›ê¸° (0: ë¹ˆì¹¸, 1: ì )
        for (int i = 0; i < N; i++) {
            st = new StringTokenizer(br.readLine());
            for (int j = 0; j < M; j++) {
                originalMap[i][j] = Integer.parseInt(st.nextToken());
            }
        }

        // ê¶ìˆ˜ 3ëª…ì˜ ìœ„ì¹˜ ì¡°í•© ë½‘ê¸° ì‹œì‘ (ì¡°í•© í•¨ìˆ˜ í˜¸ì¶œ)
        conbination(0, 0);

        // ìµœëŒ€ ì²˜ì¹˜ ìˆ˜ ì¶œë ¥
        System.out.println(maxKill);
    }

    // ê¶ìˆ˜ ìœ„ì¹˜ ì¡°í•© êµ¬í•˜ëŠ” í•¨ìˆ˜ (Mì—´ ì¤‘ 3ê°œ ì„ íƒ)
    static void conbination(int start, int depth){
        if(depth == 3){
            // ê¶ìˆ˜ ìœ„ì¹˜ 3ê°œ ë‹¤ ì„ íƒ ì™„ë£Œí•˜ë©´ ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰
            simulate();
            return;
        }

        // ì¡°í•© ë§Œë“¤ê¸°: startë¶€í„° M-1ê¹Œì§€ ì—´ ì¤‘ í•˜ë‚˜ ì„ íƒ
        for (int i = start; i < M; i++) {
            archerPos[depth] = i;            // ê¶ìˆ˜ ìœ„ì¹˜ ì„¤ì •
            conbination(i + 1, depth + 1);  // ë‹¤ìŒ ê¶ìˆ˜ ìœ„ì¹˜ ì„ íƒí•˜ëŸ¬ ì¬ê·€ í˜¸ì¶œ
        }
    }

    // ê²Œì„ ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜
    static void simulate(){
        // ì›ë³¸ ë§µì„ ë³µì‚¬í•´ì„œ ë§¤ ì‹œë®¬ë ˆì´ì…˜ë§ˆë‹¤ ì´ˆê¸°í™”
        int[][] map = new int[N][M];
        for (int i = 0; i < N; i++) {
            map[i] = originalMap[i].clone();
        }

        int killcnt = 0;  // ì´ë²ˆ ì‹œë®¬ë ˆì´ì…˜ì—ì„œ ì²˜ì¹˜í•œ ì  ìˆ˜

        // ê²Œì„ í„´ ì§„í–‰ (ìµœëŒ€ Në²ˆ ì ì´ í•œ ì¹¸ì”© ë‚´ë ¤ì˜´)
        for (int turn = 0; turn < N; turn++) {
            List<int[]> targets = new ArrayList<>(); // ì´ë²ˆ í„´ì— ê³µê²©í•  ì  ìœ„ì¹˜ ì €ì¥

            // ê¶ìˆ˜ 3ëª… ê°ê° ê³µê²©í•  ì  ì°¾ê¸°
            for (int col : archerPos){
                int[] target = bfs(map, N, col);   // BFSë¡œ ê³µê²© ëŒ€ìƒ ì°¾ê¸°
                if(target != null && !isDuplicate(targets,target)){ // ì¤‘ë³µ ëŒ€ìƒ ì•„ë‹ˆë©´
                    targets.add(target);  // íƒ€ê²Ÿ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                }
            }

            // íƒ€ê²Ÿ ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ì ë“¤ ì œê±° (ì£½ì„)
            for (int[] t : targets) {
                int r = t[0];
                int c = t[1];
                if (map[r][c] == 1) {   // ì ì´ ì‹¤ì œ ìˆìœ¼ë©´
                    map[r][c] = 0;      // ì œê±°
                    killcnt++;          // ì²˜ì¹˜ ìˆ˜ ì¦ê°€
                }
            }

            // ì ì´ í•œ ì¹¸ ì•„ë˜ë¡œ ì´ë™
            for (int i = N - 1; i > 0; i--) {
                map[i] = map[i - 1].clone(); // ìœ„ í–‰ ë³µì‚¬í•´ì„œ ì•„ë˜ í–‰ìœ¼ë¡œ ì´ë™
            }
            Arrays.fill(map[0], 0);          // ë§¨ ìœ—ì¤„ì€ ìƒˆë¡œ ë¹ˆì¹¸ìœ¼ë¡œ ì´ˆê¸°í™”
        }

        // ì´ë²ˆ ì‹œë®¬ë ˆì´ì…˜ì—ì„œ ìµœëŒ€ ì²˜ì¹˜ ìˆ˜ ê°±ì‹ 
        maxKill = Math.max(maxKill, killcnt);
    }

    // BFS íƒìƒ‰ìœ¼ë¡œ ê¶ìˆ˜ê°€ ê³µê²©í•  ì  ì°¾ê¸°
    // archerRow: ê¶ìˆ˜ í–‰ ìœ„ì¹˜ (í•­ìƒ N, ë§µ ë°”ê¹¥)
    // archerCol: ê¶ìˆ˜ ì—´ ìœ„ì¹˜
    static int[] bfs(int[][] map, int archerRow, int archerCol){
        boolean[][] visited = new boolean[N][M];    // ë°©ë¬¸ ì²´í¬ìš©
        Queue<int[]> queue = new LinkedList<>();

        // ê¶ìˆ˜ ë°”ë¡œ ìœ„ í–‰ë¶€í„° íƒìƒ‰ ì‹œì‘ (ê¶ìˆ˜ëŠ” Ní–‰, ë§µ ë°–ì´ë¯€ë¡œ N-1í–‰ë¶€í„°)
        queue.offer(new int[]{archerRow - 1, archerCol, 1});  // {í–‰, ì—´, ê±°ë¦¬}

        // íƒìƒ‰ ë°©í–¥: ì™¼ìª½(0,-1), ìœ„(-1,0), ì˜¤ë¥¸ìª½(0,1) ìˆœì„œë¡œ íƒìƒ‰ (ë¬¸ì œ ì¡°ê±´ì— ë”°ë¥¸ ìš°ì„ ìˆœìœ„)
        int[] dr = {0, -1, 0};
        int[] dc = {-1, 0, 1};

        while (!queue.isEmpty()){
            int[] cur = queue.poll();
            int row = cur[0], col = cur[1], dist = cur[2];

            if(dist > D) break;   // ê³µê²© ê±°ë¦¬ ë„˜ìœ¼ë©´ íƒìƒ‰ ì¤‘ë‹¨

            if(row >= 0 && col >= 0 && col < M && !visited[row][col]){
                visited[row][col] = true;

                if (map[row][col] == 1){   // ì  ë°œê²¬ ì‹œ ë°”ë¡œ ê³µê²© ëŒ€ìƒ ë°˜í™˜
                    return new int[]{row, col};
                }

                // í˜„ì¬ ìœ„ì¹˜ ê¸°ì¤€ 3ë°©í–¥ íƒìƒ‰
                for (int i = 0; i < 3; i++) {
                    int nr = row + dr[i];
                    int nc = col + dc[i];
                    if(nr >= 0 && nc >= 0 && nc < M){
                        queue.offer(new int[]{nr, nc, dist + 1});
                    }
                }
            }
        }
        return null;  // ê³µê²© ëŒ€ìƒ ëª» ì°¾ìŒ
    }

    // targets ë¦¬ìŠ¤íŠ¸ ë‚´ì— ê°™ì€ ì  ìœ„ì¹˜ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ (ì¤‘ë³µ ì œê±°ìš©)
    static boolean isDuplicate(List<int[]> list, int[] target) {
        for (int[] t : list) {
            if (t[0] == target[0] && t[1] == target[1]) return true;
        }
        return false;
    }
}

```

## âš™ï¸ ì£¼ìš” ë¡œì§ ìš”ì•½

### ğŸ¯ ì¡°í•© (ê¶ìˆ˜ ìœ„ì¹˜ ì„ íƒ)

```java
static void conbination(int start, int depth){
    if(depth == 3){
        simulate();
        return;
    }
    for (int i = start; i < M; i++) {
        archerPos[depth] = i;
        conbination(i + 1, depth + 1);
    }
}
```

- 3ëª…ì˜ ê¶ìˆ˜ë¥¼ ë°°ì¹˜í•˜ê¸° ìœ„í•œ ì¡°í•© ìƒì„±.
- `archerPos[]` ë°°ì—´ì— ì„ íƒëœ ê¶ìˆ˜ì˜ ì—´ ì¸ë±ìŠ¤ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

---

### ğŸ§  ì‹œë®¬ë ˆì´ì…˜ (ì „ì²´ ê²Œì„ ì‹¤í–‰)

```java
static void simulate(){
    int[][] map = new int[N][M];
    for (int i = 0; i < N; i++) map[i] = originalMap[i].clone();
    int killcnt = 0;

    for (int turn = 0; turn < N; turn++) {
        List<int[]> targets = new ArrayList<>();
        for (int col : archerPos){
            int[] target = bfs(map, N, col);
            if(target != null && !isDuplicate(targets,target)){
                targets.add(target);
            }
        }
        for (int[] t : targets) {
            if (map[t[0]][t[1]] == 1) {
                map[t[0]][t[1]] = 0;
                killcnt++;
            }
        }
        for (int i = N - 1; i > 0; i--) map[i] = map[i - 1].clone();
        Arrays.fill(map[0], 0);
    }
    maxKill = Math.max(maxKill, killcnt);
}
```

- ê° í„´ë§ˆë‹¤ ê¶ìˆ˜ë“¤ì´ ê³µê²©í•  ì ì„ BFSë¡œ ì°¾ê³ , ë™ì‹œì— ì œê±°.
- ì ì´ ì•„ë˜ë¡œ ì´ë™í•˜ëŠ” ê³¼ì •ì„ ì‹œë®¬ë ˆì´ì…˜.

---

### ğŸ” BFS íƒìƒ‰ (ê³µê²© ëŒ€ìƒ ì°¾ê¸°)

```java
static int[] bfs(int[][] map, int archerRow, int archerCol){
    boolean[][] visited = new boolean[N][M];
    Queue<int[]> queue = new LinkedList<>();
    queue.offer(new int[]{archerRow - 1, archerCol, 1});

    int[] dr = {0, -1, 0}; // ì™¼ìª½, ìœ„, ì˜¤ë¥¸ìª½
    int[] dc = {-1, 0, 1};

    while (!queue.isEmpty()){
        int[] cur = queue.poll();
        int row = cur[0], col = cur[1], dist = cur[2];

        if(dist > D) break;
        if(row >= 0 && col >= 0 && col < M && !visited[row][col]){
            visited[row][col] = true;
            if (map[row][col] == 1) return new int[]{row, col};
            for (int i = 0; i < 3; i++) {
                int nr = row + dr[i];
                int nc = col + dc[i];
                if(nr >= 0 && nc >= 0 && nc < M) queue.offer(new int[]{nr, nc, dist + 1});
            }
        }
    }
    return null;
}
```

- BFSë¡œ ê°€ê¹Œìš´ ê±°ë¦¬ë¶€í„° íƒìƒ‰.
- ì™¼ìª½ â†’ ìœ„ â†’ ì˜¤ë¥¸ìª½ ìˆœì„œë¡œ íƒìƒ‰í•˜ì—¬ â€œì™¼ìª½ ìš°ì„ â€ì„ êµ¬í˜„.

---

## ğŸ§© ì£¼ìš” ë©”ì„œë“œ ì •ë¦¬

| ë©”ì„œë“œ          | ê¸°ëŠ¥                             |
| --------------- | -------------------------------- |
| `conbination()` | ê¶ìˆ˜ ìœ„ì¹˜ ì¡°í•© ìƒì„±              |
| `simulate()`    | ì „ì²´ ê²Œì„ ì‹œë®¬ë ˆì´ì…˜ ìˆ˜í–‰        |
| `bfs()`         | ê¶ìˆ˜ê°€ ê³µê²©í•  ì  íƒìƒ‰ (BFS ê¸°ë°˜) |
| `isDuplicate()` | ê°™ì€ ì  ì¤‘ë³µ ê³µê²© ë°©ì§€           |

---

## â±ï¸ ì‹œê°„ ë³µì¡ë„ ë¶„ì„

- ì¡°í•©ì˜ ìˆ˜: **C(M, 3)**
- ê° ì¡°í•©ë§ˆë‹¤ ìµœëŒ€ Ní„´ ì‹œë®¬ë ˆì´ì…˜
- ê° í„´ë§ˆë‹¤ ê¶ìˆ˜ 3ëª… Ã— BFS íƒìƒ‰ (ìµœëŒ€ NM íƒìƒ‰)

ì¦‰,  
**O(C(M,3) Ã— N Ã— 3 Ã— NM)** â‰ˆ O(MÂ³ Ã— NÂ² Ã— M)  
M, N â‰¤ 15 ì´ë¯€ë¡œ ì¶©ë¶„íˆ ì™„ì „íƒìƒ‰ ê°€ëŠ¥.

---

## ğŸ’¬ ëŠë‚€ì  ë° ì ‘ê·¼ ì•„ì´ë””ì–´

ì´ ë¬¸ì œëŠ” ë‹¨ìˆœí•œ ì™„ì „íƒìƒ‰ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ,  
ê° ê¶ìˆ˜ê°€ ë…ë¦½ì ìœ¼ë¡œ BFS íƒìƒ‰ì„ í•´ì•¼ í•œë‹¤ëŠ” ì ê³¼  
â€œê°€ì¥ ê°€ê¹Œìš´ ê±°ë¦¬ + ì™¼ìª½ ìš°ì„ ìˆœìœ„â€ ì¡°ê±´ì„ ë™ì‹œì— ë§Œì¡±í•´ì•¼ í•œë‹¤ëŠ” ì ì—ì„œ ìƒê°ë³´ë‹¤ êµ¬í˜„ì´ ê¹Œë‹¤ë¡œì› ìŠµë‹ˆë‹¤.

ë˜í•œ **ì¡°í•©, BFS, ì‹œë®¬ë ˆì´ì…˜ì„ í•¨ê»˜ ì‚¬ìš©í•˜ëŠ” ë¬¸ì œ êµ¬ì¡°**ê°€ ë°±ì¤€ì—ì„œ ìì£¼ ë“±ì¥í•˜ê¸° ë•Œë¬¸ì—,  
ì´ ë¬¸ì œë¥¼ í†µí•´ **ì™„ì „íƒìƒ‰í˜• ì‹œë®¬ë ˆì´ì…˜ ë¬¸ì œì˜ ì •ì„ì ì¸ ì ‘ê·¼ ë°©ë²•**ì„ ìµí ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---

ğŸ“˜ **ì •ë¦¬í•˜ìë©´**,  
ì´ ë¬¸ì œëŠ” **ì‹œë®¬ë ˆì´ì…˜ + ì™„ì „íƒìƒ‰ + BFS**ì˜ 3ìš”ì†Œë¥¼ ëª¨ë‘ ì—°ìŠµí•  ìˆ˜ ìˆëŠ” ì¢…í•© ë¬¸ì œì´ë©°,  
ì¡°í•© ìƒì„± â†’ BFS íƒìƒ‰ â†’ ì‹œë®¬ë ˆì´ì…˜ì˜ ìˆœí™˜ êµ¬ì¡°ë¥¼ ì •í™•íˆ ì´í•´í•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ì—ˆìŠµë‹ˆë‹¤.

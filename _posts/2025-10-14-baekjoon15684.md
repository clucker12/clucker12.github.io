---
title: "[ë°±ì¤€ 15684] ì‚¬ë‹¤ë¦¬ ì¡°ì‘ ë¬¸ì œ í’€ì´ - Java"
date: 2025-10-14
categories: [Baekjoon, Java]
tags: [ë°±íŠ¸ë˜í‚¹, DFS, ë¸Œë£¨íŠ¸í¬ìŠ¤, êµ¬í˜„, Java, ë°±ì¤€]
layout: single
author_profile: true
read_time: true
share: true
show_tags: true
show_categories: true
toc: true
sidebar:
  nav: "c"
---

# ğŸ¯ ë°±ì¤€ 15684ë²ˆ - ì‚¬ë‹¤ë¦¬ ì¡°ì‘ (Java)

---

## ğŸ“˜ ë¬¸ì œ ì„¤ëª…

Nê°œì˜ ì„¸ë¡œì„ ê³¼ Hê°œì˜ ê°€ë¡œì„ ì´ ì£¼ì–´ì§„ ìƒíƒœì—ì„œ, ì„¸ë¡œì„  iì˜ ì¶œë°œì ì´ ië²ˆìœ¼ë¡œ ë„ì°©í•˜ë„ë¡ ë§Œë“¤ê¸° ìœ„í•´ ì¶”ê°€í•´ì•¼ í•˜ëŠ” **ìµœì†Œ ê°€ë¡œì„  ìˆ˜**ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤.  
ë‹¨, ì¶”ê°€í•  ê°€ë¡œì„  ìˆ˜ëŠ” ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ğŸ‘‰ ì…ë ¥ ì¡°ê±´:

- N: ì„¸ë¡œì„  ê°œìˆ˜ (2 â‰¤ N â‰¤ 10)
- M: ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê°€ë¡œì„  ê°œìˆ˜ (0 â‰¤ M â‰¤ 30)
- H: ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ ê°œìˆ˜ (1 â‰¤ H â‰¤ 30)

---

## ğŸ§  ì ‘ê·¼ ë°©ë²•

1. **ë°±íŠ¸ë˜í‚¹(DFS)** ìœ¼ë¡œ ê°€ëŠ¥í•œ ëª¨ë“  ê°€ë¡œì„  ì¶”ê°€ ì¡°í•©ì„ íƒìƒ‰í•©ë‹ˆë‹¤.
2. ë§¤ ë‹¨ê³„ë§ˆë‹¤ ì‚¬ë‹¤ë¦¬ êµ¬ì¡°ë¥¼ ì™„ì„±í–ˆëŠ”ì§€(`check()` í•¨ìˆ˜) ê²€ì‚¬í•©ë‹ˆë‹¤.
3. ië²ˆ ì„¸ë¡œì„ ì´ ië²ˆìœ¼ë¡œ ë„ì°©í•˜ëŠ” ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´ ìµœì†Œ ê°€ë¡œì„  ìˆ˜ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.
4. ê°€ë¡œì„ ì„ ì¶”ê°€í•  ë•ŒëŠ” ì¸ì ‘í•œ ê³³ì— ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì¡°ê±´ì„ ê²€ì‚¬í•©ë‹ˆë‹¤.

---

## ğŸ’» ì½”ë“œ

```java
package Baekjoon;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.StringTokenizer;

public class baekjoon15684 {
    static int N, M, H;                 // N: ì„¸ë¡œì„  ìˆ˜, M: ê°€ë¡œì„  ìˆ˜, H: ê°€ë¡œì„  ë†“ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ ìˆ˜
    static int min = Integer.MAX_VALUE; // ìµœì†Œë¡œ ì¶”ê°€í•  ê°€ë¡œì„  ê°œìˆ˜ ì €ì¥
    static boolean[][] line;            // line[a][b] = trueë©´ aë²ˆ ì¤„ì— bë²ˆ ì„¸ë¡œì„ ê³¼ b+1ë²ˆ ì„¸ë¡œì„  ì‚¬ì´ì— ê°€ë¡œì„  ì¡´ì¬

    public static void main(String[] args)throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st;

        // ì…ë ¥: N(ì„¸ë¡œì„  ìˆ˜), M(ê¸°ì¡´ ê°€ë¡œì„  ìˆ˜), H(ê°€ë¡œì„  ìœ„ì¹˜ ìˆ˜)
        st = new StringTokenizer(br.readLine());
        N = Integer.parseInt(st.nextToken());
        M = Integer.parseInt(st.nextToken());
        H = Integer.parseInt(st.nextToken());

        // ê°€ë¡œì„  ë°°ì—´ ì´ˆê¸°í™” (ì¸ë±ìŠ¤ ì•ˆì „í•˜ê²Œ H+2 x N+2 í¬ê¸°ë¡œ ì„¤ì •)
        line = new boolean[H + 2][N + 2];

        // ê¸°ì¡´ ê°€ë¡œì„  ì •ë³´ ì €ì¥
        for (int i = 0; i < M; i++) {
            st = new StringTokenizer(br.readLine());
            int a = Integer.parseInt(st.nextToken()); // ì¤„ ë²ˆí˜¸ (í–‰)
            int b = Integer.parseInt(st.nextToken()); // ì„¸ë¡œì„  ë²ˆí˜¸ (ì—´)
            line[a][b] = true; // aë²ˆ ì¤„ì˜ bì„¸ë¡œì„ ê³¼ b+1ì„¸ë¡œì„ ì„ ì—°ê²°í•˜ëŠ” ê°€ë¡œì„  ì¡´ì¬
        }

        // ë°±íŠ¸ë˜í‚¹ DFS ì‹œì‘
        dfs(0, 1, 1);

        // ìµœì†Œ ê°€ë¡œì„  ìˆ˜ê°€ 3ë³´ë‹¤ í¬ë©´ -1 ì¶œë ¥ (ë¶ˆê°€ëŠ¥)
        System.out.println(min > 3 ? -1 : min);
    }

    /**
     * ì‚¬ë‹¤ë¦¬ ê²°ê³¼ê°€ i â†’ ië¡œ ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜
     */
    static boolean check() {
        // ê° ì„¸ë¡œì„ ë§ˆë‹¤ ê²€ì‚¬
        for (int start = 1; start <= N; start++) {
            int k = start; // í˜„ì¬ ìœ„ì¹˜ (ì„¸ë¡œì„  ë²ˆí˜¸)

            // ìœ„ì—ì„œ ì•„ë˜ë¡œ ë‚´ë ¤ì˜¤ë©° ì´ë™
            for (int i = 1; i <= H; i++) {
                if (line[i][k]) {
                    k++; // ì˜¤ë¥¸ìª½ ê°€ë¡œì„  ë§Œë‚˜ë©´ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
                } else if (k > 1 && line[i][k - 1]) {
                    k--; // ì™¼ìª½ ê°€ë¡œì„  ë§Œë‚˜ë©´ ì™¼ìª½ìœ¼ë¡œ ì´ë™
                }
            }

            // ì‹œì‘ê³¼ ë„ì°©ì´ ë‹¤ë¥´ë©´ ì‹¤íŒ¨
            if (k != start) return false;
        }
        return true; // ëª¨ë‘ i â†’ ië¡œ ë„ì°©í•˜ë©´ true
    }

    /**
     * ë°±íŠ¸ë˜í‚¹ì„ ì´ìš©í•œ DFS
     * @param cnt í˜„ì¬ê¹Œì§€ ì¶”ê°€í•œ ê°€ë¡œì„  ê°œìˆ˜
     * @param x   ê°€ë¡œì¤„ ì‹œì‘ ìœ„ì¹˜ (ì¤„ ë²ˆí˜¸)
     * @param y   ì„¸ë¡œì„  ì‹œì‘ ìœ„ì¹˜ (ì—´ ë²ˆí˜¸)
     */
    static void dfs(int cnt, int x, int y) {
        // í˜„ì¬ ê°€ë¡œì„  ê°œìˆ˜ê°€ ì´ë¯¸ ìµœì†Œê°’ ì´ìƒì´ë©´ íƒìƒ‰ ì¤‘ë‹¨
        if (cnt >= min) return;

        // ìœ íš¨í•œ ì‚¬ë‹¤ë¦¬ êµ¬ì¡°ì´ë©´ ìµœì†Œê°’ ê°±ì‹ 
        if (check()) {
            min = cnt;
            return;
        }

        // ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ ì¶”ê°€ ê°€ëŠ¥
        if (cnt == 3) return;

        // ê°€ë¡œì¤„ ië¥¼ xë¶€í„° Hê¹Œì§€ ìˆœíšŒ
        for (int i = x; i <= H; i++) {
            // j: ì„¸ë¡œì„  ë²ˆí˜¸ (ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìˆëŠ” ìœ„ì¹˜ëŠ” 1~N-1)
            for (int j = 1; j < N; j++) {
                // í˜„ì¬ ìœ„ì¹˜ë‚˜ ì–‘ ì˜†ì— ê°€ë¡œì„ ì´ ì´ë¯¸ ìˆìœ¼ë©´ ë†“ì„ ìˆ˜ ì—†ìŒ
                if (line[i][j] || line[i][j - 1] || line[i][j + 1]) continue;

                // ê°€ë¡œì„  ì¶”ê°€
                line[i][j] = true;
                dfs(cnt + 1, i, j); // ë‹¤ìŒ ë‹¨ê³„ë¡œ íƒìƒ‰
                line[i][j] = false; // ë°±íŠ¸ë˜í‚¹: ë‹¤ì‹œ ì›ìƒ ë³µêµ¬
            }
        }
    }
}

```

---

## ğŸ” í•µì‹¬ ë¡œì§ ìš”ì•½

| ë©”ì„œë“œ     | ì„¤ëª…                                   |
| ---------- | -------------------------------------- |
| `check()`  | ì‚¬ë‹¤ë¦¬ ê²°ê³¼ê°€ i â†’ ië¡œ ì—°ê²°ë˜ëŠ”ì§€ ê²€ì‚¬  |
| `dfs()`    | ë°±íŠ¸ë˜í‚¹ìœ¼ë¡œ ê°€ëŠ¥í•œ ê°€ë¡œì„  ì¡°í•©ì„ íƒìƒ‰ |
| `line[][]` | ê°€ë¡œì„  ì¡´ì¬ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” 2ì°¨ì› ë°°ì—´ |

---

## ğŸ§© ì£¼ìš” ìë£Œêµ¬ì¡° ë° ë¡œì§

- **`boolean[][] line`**  
  â†’ `line[a][b] = true`ì´ë©´ aë²ˆì§¸ ì¤„ì˜ bë²ˆ ì„¸ë¡œì„ ê³¼ b+1ë²ˆ ì„¸ë¡œì„  ì‚¬ì´ì— ê°€ë¡œì„  ì¡´ì¬
- **ë°±íŠ¸ë˜í‚¹ ì¡°ê±´**
  - í˜„ì¬ ìœ„ì¹˜ í˜¹ì€ ì–‘ ì˜†ì— ì´ë¯¸ ê°€ë¡œì„ ì´ ìˆìœ¼ë©´ ì¶”ê°€ ë¶ˆê°€
  - 3ê°œ ì´ˆê³¼ ì¶”ê°€ ì‹œ íƒìƒ‰ ì¢…ë£Œ
  - ìµœì†Œ ê°€ë¡œì„  ìˆ˜ `min` ê°±ì‹ 

---

## â±ï¸ ì‹œê°„ ë³µì¡ë„ ë¶„ì„

- **DFS ê¹Šì´ ìµœëŒ€:** 3
- **ê°€ë¡œì„  ìœ„ì¹˜ í›„ë³´:** H Ã— (N-1) â‰¤ 30 Ã— 9 = 270
- **ìµœì•…ì˜ ê²½ìš°:** O(270Â³) (í•˜ì§€ë§Œ ë°±íŠ¸ë˜í‚¹ ì¡°ê±´ìœ¼ë¡œ ì‹¤ì œ íƒìƒ‰ì€ í›¨ì”¬ ì ìŒ)

---

## ğŸ’¡ ë§ˆë¬´ë¦¬ ë° ëŠë‚€ì 

ì´ ë¬¸ì œëŠ” ë‹¨ìˆœí•œ ë¸Œë£¨íŠ¸í¬ìŠ¤ë³´ë‹¤ëŠ” **íš¨ìœ¨ì ì¸ ë°±íŠ¸ë˜í‚¹ ì„¤ê³„**ê°€ í•µì‹¬ì…ë‹ˆë‹¤.  
ì²˜ìŒì—ëŠ” ëª¨ë“  ì¡°í•©ì„ íƒìƒ‰í•˜ë ¤ë‹¤ ì‹œê°„ ì´ˆê³¼ë¥¼ ìš°ë ¤í–ˆì§€ë§Œ,  
ì¸ì ‘ ì œì•½ ì¡°ê±´(`line[i][j-1]`, `line[i][j+1]`)ì„ í™œìš©í•´ ê°€ì§€ì¹˜ê¸°ë¥¼ í•˜ë©´ì„œ íš¨ìœ¨ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

ì‚¬ë‹¤ë¦¬ì˜ íë¦„ì„ ì§ì ‘ ë”°ë¼ê°€ë©° ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” ê³¼ì •ì—ì„œ  
**ë¬¸ì œì˜ íë¦„ì„ ì‹œê°ì ìœ¼ë¡œ ì´í•´í•˜ëŠ” ëŠ¥ë ¥ì˜ ì¤‘ìš”ì„±**ì„ ëŠë‚„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

---
